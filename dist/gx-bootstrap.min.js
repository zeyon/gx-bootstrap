/*! gx-bootstrap 2014-02-07 */
gx.bootstrap.CheckButton=new Class({gx:"gx.bootstrap.CheckButton",Extends:gx.ui.Container,options:{size:"regular",label:"&nbsp;",value:!1},class_checked:"btn-success",class_unchecked:"btn-warning",_checked:!1,_disabled:!1,initialize:function(a,b){var c=this;try{this.parent(a,b);var d="btn btn-default"+("regular"==this.options.size?"":" btn-"+this.options.size);this._display.group=new Element("div",{"class":"btn-group"}),this._display.root.adopt(this._display.group),this._display.button=new Element("button",{"class":d}),this._display.indicator=new Element("button",{"class":d}),this._display.group.adopt([this._display.indicator,this._display.button]),this._display.button.addEvent("click",function(a){a.preventDefault(),c.toggle()}),this._display.indicator.addEvent("click",function(a){a.preventDefault(),c.toggle()}),this.options.value?this.check(1):this.uncheck(1),this.setLabel(this.options.label)}catch(e){gx.util.Console("gx.bootstrap.CheckButton->initialize",e.message)}},setLabel:function(a){this._display.button.set("html",a)},get:function(){return this._checked},toggle:function(a){return this._checked?this.uncheck(a):this.check(a),!1},check:function(a){this._disabled||(this._display.indicator.removeClass(this.class_unchecked),this._display.indicator.addClass(this.class_checked),this._display.indicator.set("html",'&nbsp;<span class="glyphicon glyphicon-ok"></span>'),this._checked=!0,null!=a&&a||(this.fireEvent("change",!0),this.fireEvent("check")))},uncheck:function(a){this._disabled||(this._display.indicator.removeClass(this.class_checked),this._display.indicator.addClass(this.class_unchecked),this._display.indicator.set("html",'&nbsp;<span class="glyphicon glyphicon-remove"></span>'),this._checked=!1,null!=a&&a||(this.fireEvent("change",!1),this.fireEvent("check")))},set:function(a){a?this.check():this.uncheck()},setDisabled:function(a){this._disabled=a,this._display.indicator.disabled=a,this._display.button.disabled=a}}),gx.bootstrap.Checklist=new Class({gx:"gx.bootstrap.Checklist",Extends:gx.ui.Container,options:{height:150,width:350,search:!0,method:"POST",data:!1,url:!1,getItemValue:null,requestData:{},listValue:"value",listFormat:function(a){return a.label},decodeResponse:function(a){return JSON.decode(a)},onClick:!1},_elems:[],_bg:"",initialize:function(a,b){var c=this;try{this.parent(a,b),this._display.frame=new Element("div",{styles:{height:c.options.height+"px",overflow:"auto"}}),this._display.root.adopt(this._display.frame),this._display.root.addClass("b"),this._display.root.addClass("bs-checklist"),this._display.root.setStyle("width",c.options.width),this.options.search&&(this._display.search={box:new Element("div",{"class":"b_b p2_t p2_r p2_l"}),txt:new Element("input",{type:"text",styles:{width:c.options.width-50+"px"}})},this._display.search.box.inject(this._display.root,"top"),this._display.search.box.adopt(__({"class":"bs-select input-prepend",children:[{tag:"span","class":"add-on",child:{tag:"i","class":"icon-search"}},this._display.search.txt]})),this._display.search.txt.addEvent("keyup",function(){c.search(c._display.search.txt.value)})),this._display.table=new Element("table",{"class":"table table-striped"}),this.options.onClick&&this._display.table.addEvent("click",this.options.onClick),this._display.frame.adopt(this._display.table),this.options.url&&this.loadFromURL(this.options.url,this.options.requestData),isArray(this.options.data)&&this.set(this.options.data)}catch(d){gx.util.Console("gx.bootstrap.Checklist->initialize",d.message)}},set:function(a){try{if(this._display.table.empty(),null==a)return;a.each(function(a){this.addItem(a)},this)}catch(b){gx.util.Console("gx.bootstrap.Checklist->set",b.message)}},addItem:function(a){try{var b={label:null!=this.options.listFormat?this.options.listFormat(a):a,value:null==this.options.getItemValue?a.value:this.options.getItemValue(a),input:new Element("input",{type:"checkbox",value:a[this.options.listValue]})};b.row=new Element("tr");var c=new Element("td",{width:18});c.adopt(b.input),b.row.adopt(c);var d=new Element("td",{html:b.label});d.addEvent("click",function(){b.input.checked=!b.input.checked,b.input.checked?b.row.addClass("active"):b.row.removeClass("active")}),b.row.adopt(d),this._display.table.adopt(b.row),this._elems.push(b),this._bg=""==this._bg?" bg":""}catch(e){gx.util.Console("gx.bootstrap.Checklist->addItem",e.message)}},search:function(a){try{var b=new RegExp(a);this._elems.each(function(a){-1!=a.value.search(b)?a.row.setStyle("display","table-row"):a.row.setStyle("display","none")},this)}catch(c){gx.util.Console("gx.bootstrap.Checklist->search",c.message)}},reset:function(){try{this._elems.each(function(a){a.input.checked=!1})}catch(a){gx.util.Console("gx.bootstrap.Checklist->reset",a.message)}},setValues:function(a){try{return this._elems.each(function(b){b.input.checked=a.contains(b.input.get("value")),b.input.checked?b.row.addClass("active"):b.row.removeClass("active")}),a}catch(b){throw gx.util.Console("gx.bootstrap.Checklist->setValues",b.message),b}},getValues:function(a){try{var b=[];return this._elems.each(function(c){c.input.checked&&(null==a?b.push(c.value):null!=c.value[a]&&b.push(c.value[a]))}),b}catch(c){throw gx.util.Console("gx.bootstrap.Checklist->getValues",c.message),c}},loadFromURL:function(a,b,c){var d=this;try{this._elems=[],this._bg="",this._display.table.empty(),null==a&&(a=d.options.url),null==b&&(b=d.options.requestData);var e=new Request({method:d.options.method,url:a,data:b,onComplete:function(){d._display.frame.removeClass("loader")},onSuccess:function(a){try{var b=d.options.decodeResponse(a);isArray(b)?(d.set(b),null!=c&&c(b)):gx.util.Console("gx.bootstrap.Checklist->loadFromUrl","Invalid server answer: "+a)}catch(e){gx.util.Console("gx.bootstrap.Checklist->loadFromUrl",e.message)}},onRequest:function(){d._display.frame.addClass("loader")}});e.send()}catch(f){gx.util.Console("gx.bootstrap.Checklist->loadFromUrl",f.message)}}}),gx.bootstrap.Confirm=new Class({Extends:gx.bootstrap.Dropup,options:{width:"auto",refuse:function(){},accept:function(){},closable:!0},initialize:function(a){"string"==typeOf(a.content)&&(a.content=new Element("h3",{html:""+a.content,style:"margin-top:35px;"}));var b=this;null==a.footer&&(a.footer=[new Element("button",{"class":"btn btn-danger",html:'<span class="glyphicon glyphicon-remove"></span> Cancel',events:{click:function(){b.hide()}}}),new Element("button",{"class":"btn btn-default",html:'<span class="glyphicon glyphicon-ok"></span> Ok',events:{click:function(){b.hide(!0),b.options.accept()}}})]),this.parent(a),this.show()},hide:function(a){this.parent(),this.destroy(),a!==!0&&this.options.refuse()}}),gx.bootstrap.DataFilter=new Class({Extends:gx.ui.Container,Binds:["clearFilter"],options:{elementWidth:"30%",notSelected:" ",clearBtn:!0},origin:null,filtered:null,filter:[],_theme:{root:"gxBootstrapDataFilter form-inline"},initialize:function(a,b){this.parent(a,b),this._ui.root.addClass(this._theme.root),this._ui.clear=new Element("div",{style:"clear:both;"}),this._ui.clearBtn=new Element("button",{"class":"btn btn-default",type:"submit",html:'<span class="glyphicon glyphicon-ban-circle"></span>'}),this._ui.clearBtn.addEvent("click",this.clearFilter),this._ui.root.adopt(this.options.clearBtn?this._ui.clearBtn:null,this._ui.clear)},addCustomElement:function(a){return a.inject(this._ui.clear,"before"),this},addSelectFilter:function(a,b,c,d,e){var f=new Element("select",{placeholder:b,"class":"form-control"});d||(d=this.options.elementWidth),e||(e=this.selectFilter);var g={identifier:a,input:f,fields:"array"!=typeOf(c)?[c]:c,method:e,type:"Select"};f.addEvent("change",function(a){g.value=a.target.get("value"),this.doFilter()}.bind(this));var h=new Element("div",{"class":"input-group",styles:{width:d}}).adopt(new Element("div",{"class":"input-group-addon",html:b}),f);return g.section=h,h.inject(this._ui.clear,"before"),this.filter.push(g),this},addFulltextFilter:function(a,b,c,d,e){var f=new Element("input",{placeholder:c,"class":"form-control"});d||(d=this.options.elementWidth),e||(e=this.fulltextFilter);var g={identifier:a,input:f,fields:"array"!=typeOf(b)?[b]:b,method:e,type:"Fulltext"};f.addEvent("keyup",function(a){g.value=a.target.get("value"),this.doFilter()}.bind(this));var h=new Element("div",{"class":"input-group",styles:{width:d}});return c?h.adopt(new Element("div",{"class":"input-group-addon",html:c}),f):h.adopt(f,new Element("div",{"class":"input-group-addon",html:'<span class="glyphicon glyphicon-search"></span>'})),g.section=h,h.inject(this._ui.clear,"before"),this.filter.push(g),this},clearFilter:function(){this.filter.each(function(a){"Select"==a.type?a.input.selectedIndex=0:"Fulltext"==a.type&&a.input.set("value",""),a.value=null}.bind(this)),this.doFilter()},initData:function(a){return this.origin=a,this.filter.each(function(a){var b="init"+a.type+"Filter";this[b](a)}.bind(this)),this},initSelectFilter:function(a){var b=a.input.selectedIndex,c={};this.origin.each(function(b){for(var d=0;d<a.fields.length;d++){var e,f=a.fields[d];f="function"==typeOf(f)?f(b):b[f],"object"==typeOf(f)?(e=f.label,f=f.field):e=f,null==c[f]&&(c[f]=e)}});var d=[];d.push(new Element("option",{html:this.options.notSelected,value:"",selected:"selected"})),Object.each(c,function(a,b){d.push(new Element("option",{html:a,value:b}))}),a.input.empty().adopt(d),a.input.selectedIndex=b},initFulltextFilter:function(){},doFilter:function(){var a=this;return this.filtered=Array.clone(this.origin),this.filter.each(function(b){null!=b.value&&""!=b.value&&(a.filtered=a.filtered.filter(function(a){for(var c=!1,d=0;d<b.fields.length;d++){var e=b.fields[d];if(e="function"==typeOf(e)?e(a):a[e],"object"==typeOf(e)&&(e=e.field),c=b.method(b.value,e))break}return c}))}),this.fireEvent("filtered",[this.filtered]),this.filtered},fulltextFilter:function(a,b){return new RegExp(".*"+a+".*","i").test(b)},selectFilter:function(a,b){return a==b},getFilter:function(a){for(var b=0;b<this.filter.length;b++)if(this.filter[b].identifier==a)return this.filter[b];return null}}),gx.bootstrap.Field=new Class({gx:"gx.bootstrap.Field",Extends:gx.ui.Container,options:{label:"",type:"text",description:"",highlight:!1,"default":null,horizontal:["col-md-3","col-md-9"],hintpos:"right",highlighteffect:!1},_display:{},initialize:function(a){try{this.parent(new Element("div",{"class":"form-group"}),a),this._display.label=new Element("label",{"class":"control-label","for":"",html:this.options.label}),this.options.horizontal!==!1&&this._display.label.addClass(this.options.horizontal[0]),this._display.hint=this._display.label,this._display.highlight=new Element("span",{"class":"help-block highlight"}),this._display.description=new Element("span",{"class":"help-block",html:this.options.description}),this._display.root.adopt(this._display.label),this._display.controlwrapper=new Element("div"),this.setField(this.options.type,a),this._display.hint.addClass("hint--fwidth hint--"+this.options.hintpos),this._display.controlwrapper.adopt(this._display.description,this._display.highlight)}catch(b){gx.util.Console("gx.bootstrap.Field->initialize",b.stack)}},setLabel:function(a){this._display.label.set("html",a)},setHelp:function(a){this._display.description.setProperty("html",a)},setField:function(a,b){if(null==this._display.field){var c,d=this;switch(typeOf(a)){case"element":this._display.field=a,this._type="element",c=a;break;case"string":switch(this._type=a,a){case"text":case"password":case"file":case"checkbox":case"string":case"integer":case"float":var e=a;("float"==a||"string"==a||"integer"==a)&&(e="text"),this._display.field=new Element("input",{type:e}),null!=b.disabled&&this._display.field.set("disabled",!0),null!=b["default"]&&this._display.field.set("value",b["default"]),b.checked&&(this._display.field.checked=b.checked),c=this._display.field,"integer"==a?c.addEvent("blur",function(){/^\d*$/.test(this.get("value"))?d.setHighlight():d.setHighlight("This field must be an integer!","error")}):"float"==a&&c.addEvent("blur",function(){/^(\d+((\.|\,)\d+)?)*$/.test(this.get("value"))?d.setHighlight():d.setHighlight("This field must be a floating point!","error")});break;case"textarea":this._display.field=new Element("textarea"),null!=b["default"]&&this._display.field.setProperty("html",b["default"]),c=this._display.field;break;case"select":switch(this._display.field=new Element("select"),typeOf(b.options)){case"array":b.options.each(function(a){var c=new Element("option",{value:a,text:a});null!=b["default"]&&b["default"]==a&&c.setProperty("selected","selected"),this._display.field.adopt(c)}.bind(this));break;case"object":var f;for(var g in b.options)f=new Element("option",{html:b.options[g],value:g}),null!=b["default"]&&b["default"]==g&&f.setProperty("selected","selected"),this._display.field.adopt(f)}c=this._display.field;break;case"optionlist":this._display.field=new Element("div");var h=null==b["default"]?null:b["default"];switch(typeOf(b.options)){case"array":b.options.each(function(a){this._display.field.adopt(__({children:[{tag:"input",name:b.id,type:"radio",id:"radiobtn",value:a,checked:a==h}," "+a]}))}.bind(this));break;case"object":for(g in b.options)this._display.field.adopt(__({children:[{tag:"input",name:b.id,type:"radio",id:"radiobtn",value:g,checked:g==h}," "+b.options[g]]}))}c=this._display.field;break;case"checklist":this._display.field=new gx.bootstrap.Checklist(null,null==b.options?b:b.options),c=$(this._display.field),this._type="gx";break;case"date":b.orientation="right",delete b.label,this._display.field=new gx.bootstrap.DatePicker(null,null==b.options?b:b.options),c=$(this._display.field),this._type="gx";break;case"month":this._display.field=new gx.bootstrap.MonthPicker(null,null==b.options?b:b.options),c=$(this._display.field),this._type="gx";break;case"time":this._display.field=new gx.bootstrap.Timebox(null,null==b.options?b:b.options),c=$(this._display.field),this._type="gx";break;case"gxselect":delete b.label,this._display.field=new gx.bootstrap.Select(null,b),c=$(this._display.field),this._type="gx";break;case"multivalueeditor":this._display.field=new gx.bootstrap.MultiValueEditor(null,null==b.options?b:b.options),c=$(this._display.field),this._type="gx";break;case"editor":this._display.field=new gx.bootstrap.Editor(null,null==b.options?b:b.options),c=$(this._display.field),this._type="gx";break;case"html":c=null==b.content?new Element("div"):b.content}break;case"class":a=null!=b.options?new a(null,b.options):new a(null,b);case"object":instanceOf(a,gx.ui.Container)&&"function"==typeOf(a.display)&&(this._display.field=a,this._type="gx",c=$(a)),null!=this.options.default&&this.setValue(this.options.default);break;default:return}var i=c.get("tag");("textarea"==i||"select"==i||"input"==i)&&c.addClass("form-control"),void 0!=b&&void 0!=b.disabled&&this.setDisabled(b.disabled),c=this._display.controlwrapper.adopt(c),this.options.horizontal!==!1&&(this._display.hint=this._display.controlwrapper,this._display.controlwrapper.addClass(this.options.horizontal[1])),c.inject(this._display.root)}},getValue:function(){switch(this._type){case"element":case"text":case"password":case"file":case"select":case"textarea":case"string":case"integer":case"float":return this._display.field.get("value");case"optionlist":var a;return this._display.field.getElements("input").each(function(b){b.checked&&(a=b.get("value"))}),a;case"checkbox":return this._display.field.get("checked");case"multivalueeditor":return this._display.field.getValue();case"object":case"gx":case"editor":if("function"==typeOf(this._display.field.getValue))return this._display.field.getValue();if("function"==typeOf(this._display.field.getValues))return this._display.field.getValues();if("function"==typeOf(this._display.field.get))return this._display.field.get();default:return null}},setDisabled:function(a){switch(this._type){case"element":case"text":case"password":case"file":case"select":case"textarea":case"checkbox":case"multivalueeditor":this._display.field.disabled=a;break;case"optionlist":;this._display.field.getElements("input").each(function(b){b.disabled=a});break;case"object":case"gx":"boolean"==typeOf(this._display.field.disabled)&&(this._display.field.disabled=a),"function"==typeOf(this._display.field.setDisabled)&&this._display.field.setDisabled(a)}return this},setHighlight:function(a,b){this._display.root.removeClass("has-error"),this._display.root.removeClass("has-success"),this._display.root.removeClass("has-warning");var c=this;if(null==a||a===!1||""==a?this.options.highlighteffect?function(){c._display.highlight.removeClass("visible")}.delay(200):c._display.highlight.removeClass("visible"):(this._display.highlight.set("html",a),this._display.highlight.addClass("visible")),null!=b)switch(b){case"error":case"success":case"warning":this.options.highlighteffect?function(){c._display.root.addClass("has-"+b)}.delay(10):c._display.root.addClass("has-"+b)}return this},setHintHighlight:function(a,b){this._display.root.removeClass("has-error"),this._display.root.removeClass("has-success"),this._display.root.removeClass("has-warning");var c=this._display.hint;return c.removeClass("hint--always"),c.removeClass("hint--error"),c.removeClass("hint--success"),c.removeClass("hint--warning"),null==a||""==a?void(this.options.highlighteffect?function(){c.erase("data-hint")}.delay(200):c.erase("data-hint")):(c.addClass("hint--"+b),this._display.root.addClass("has-"+b),c.set("data-hint",a),this.options.highlighteffect?function(){c.addClass("hint--always")}.delay(1):c.addClass("hint--always"),this)},setValue:function(a){switch(this._type){case"text":case"password":case"textarea":this._display.field.set("value",a);break;case"select":var b,c=this._display.field.options;for(b=0;b<c.length;b++)if(a==c[b].get("value")){c[b].selected=!0;break}break;case"checkbox":this._display.field.checked=a?!0:!1;break;case"optionlist":this._display.field.getElements("input").each(function(b){b.get("value")==a?b.set("checked",!0):b.erase("checked")});break;case"gx":case"editor":"function"==typeOf(this._display.field.setValue)?this._display.field.setValue(a):"function"==typeOf(this._display.field.setValues)?this._display.field.setValues(a):"function"==typeOf(this._display.field.set)&&this._display.field.set(a);break;default:if(null!=this._display.field&&null!=this._display.field.get)switch(this._display.field.get("tag")){case"input":case"select":this._display.field.set("value",a)}}return this.fireEvent("setValue",[a]),this},reset:function(){"function"==typeOf(this._display.field.reset)?this._display.field.reset():null!=this.options["default"]?this.setValue(this.options["default"]):this.setValue()},getInput:function(){return this._display.field}}),gx.bootstrap.FieldUpload=new Class({Extends:gx.bootstrap.Field,options:{position:"regular",height:60,width:60,inputname:"upload",uploadurl:"./index.php",params:{},imageurl:"",placeholder:null,finishdelay:2e3,disabledMessage:"Disabled",hintpos:"bottom",showError:function(a,b){a.error(b),console.log("gx.bootstrap.FieldImgUpload: Upload error",b)},parseResponse:function(a,b,c){var d;try{d=JSON.decode(b)}catch(e){return void a.options.showError(a,"Could not parse server response: "+b)}null!=d.error?a.options.showError(a,d.error):c(d.result)}},running:!1,disabled:!1,initialize:function(a){null==a.type&&(a.type=new Element("div")),this.parent(a),this.create()},create:function(){this._ui.root.addClass("gxBootsrapImgUpload "+this.options.position),this._display.controlwrapper.adopt(this.options.type);var a=this;this._ui.select=__({tag:"input",type:"file",title:"Drop File or Click",styles:{height:this.options.height,width:this.options.width},onChange:function(){a.processFiles(this.files)},onClick:function(){return a.running?!1:a.disabled?(a.displayDisabled(),!1):!0}}),this._ui.progressText=new Element("span",{"class":"",html:"40 / 100"}),this._ui.progressAbort=new Element("span",{"class":"glyphicon glyphicon-remove",events:{click:this.abort.bind(this)}}),this._ui.progress=new Element("div",{"class":"progress-bar",style:"width: 40%;"}),this._ui.image=new Element("div",{"class":"image",styles:{height:this.options.height,width:this.options.width}}),this._ui.placeholder=new Element("img",{"class":"placeholder",src:""}),this._ui.image.adopt(this._ui.placeholder,new Element("div.textprogress").adopt(new Element("div.blend"),this._ui.progressText,this._ui.progressAbort,new Element("div.progress").adopt(this._ui.progress)),this._ui.select),this.options.placeholder&&this._ui.placeholder.setStyle("background-image","url("+this.options.placeholder+")"),this.injectImageArea(this._ui.image),this.initDrop(this._ui.image),this.options.default&&this.setValue(this.options.default)},injectImageArea:function(a){return"regular"==this.options.position||"small"==this.options.position?void a.inject(this._display.field):void new Element("div",{styles:{clear:"both"}}).adopt(new Element("div",{styles:{position:"absolute",left:"0px"}}).adopt(a)).inject(this._display.root)},initDrop:function(a){var b=this;a.ondragover=function(){return b.running?!1:b.disabled?(b.displayDisabled(),!1):(a.addClass("access"),!1)},a.ondragenter=function(){return b.running?!1:b.disabled?(b.displayDisabled(),!1):(a.addClass("access"),!1)},a.ondragleave=function(){return b.running?!1:b.disabled?(b.displayDisabled(),!1):(a.removeClass("access"),!1)},a.ondragend=function(){return b.running?!1:b.disabled?(b.displayDisabled(),!1):(a.removeClass("access"),!1)},a.ondrop=function(c){return b.running?!1:b.disabled?(b.displayDisabled(),!1):(c.stopPropagation(),c.preventDefault(),void(b.running||(a.removeClass("access"),b.processFiles(c.dataTransfer.files))))}},processFiles:function(a){var b=new FormData;this.setActive();var c=a[0];b.append(this.options.inputname,c);for(var d in this.options.params)this.options.params.hasOwnProperty(d)&&b.append(d,this.options.params[d]);var e=this;this.xhr=new XMLHttpRequest,this.xhr.open("POST",this.options.uploadurl),this.xhr.onload=function(){return 200!=this.status?void e.options.showError(e,"Invalid load status: "+this.status):(e.progress(100),void e.options.parseResponse(e,this.responseText,function(a){e.setImage(a),e.finish()}))},this.xhr.onerror=function(){e.options.showError(e,"Error: "+res.error)},this.xhr.upload.onprogress=function(a){if(a.lengthComputable){var b=a.loaded/a.total*100|0;e.progress(b)}},this.xhr.send(b)},setActive:function(){this.running=!0,this.setHighlight(),this._ui.progress.removeClass("progress-bar-success"),this._ui.progress.removeClass("progress-bar-danger"),this._ui.progress.removeClass("progress-bar-warning"),this._ui.progress.setStyle("width","0%"),this._ui.image.addClass("active"),this._ui.progressAbort.show()},abort:function(){this.xhr&&this.xhr.abort(),this._ui.progressAbort.hide(),this.setHighlight("","warning"),this._ui.progress.addClass("progress-bar-warning"),function(){this.setHighlight(),this._ui.progress.removeClass("progress-bar-warning"),this._ui.image.removeClass("active")}.bind(this).delay(this.options.finishdelay),this._ui.select.erase("value"),this.running=!1},error:function(a){this.setHighlight(a,"error"),this._ui.progress.addClass("progress-bar-danger"),this._ui.progressAbort.hide(),this._ui.select.erase("value"),this.running=!1},finish:function(){this.setHighlight("","success"),this._ui.progress.addClass("progress-bar-success"),this._ui.progressAbort.hide(),function(){this.setHighlight(),this._ui.progress.removeClass("progress-bar-success"),this._ui.image.removeClass("active")}.bind(this).delay(this.options.finishdelay),this._ui.select.erase("value"),this.running=!1},progress:function(a){this._ui.progress.setStyle("width",a+"%"),this._ui.progressText.set("html",a+"%")},setValue:function(a){this.setImage(a)},getValue:function(){return null},setImage:function(a){this._ui.placeholder.set("src",this.options.imageurl+a)},reset:function(){},setDisabled:function(a){this.disabled=a,this.disabled?this._ui.root.addClass("disabled"):this._ui.root.removeClass("disabled")},displayDisabled:function(){this.setHighlight(this.options.disabledMessage,"warning"),function(){this.setHighlight()}.delay(2e3,this)}}),gx.bootstrap.Fieldset=new Class({gx:"gx.bootstrap.Fieldset",Extends:gx.ui.Container,options:{size:"regular",title:null,value:!1,horizontal:["col-md-3","col-md-9"],columns:!1,hintpos:"right",highlighteffect:!0},_theme:{horizontal:"form-horizontal",columns:"form-columns"},_fields:{},_currentcolumn:0,initialize:function(a,b){try{this.parent(null==a?new Element("fieldset"):a,b),this.options.horizontal!==!1&&this._ui.root.addClass(this._theme.horizontal),null!=this.options.title&&this._ui.root.adopt(new Element("legend",{html:this.options.title})),this.initColumns(this.options.columns),this._ui.root.addClass(this._theme.columns),"object"==typeOf(this.options.fields)&&this.addFields(this.options.fields)}catch(c){gx.util.Console("gx.bootstrap.Fieldset->initialize",c.stack)}},initColumns:function(a){"number"!=typeof a&&(a=1),this._ui.columns=[];for(var b=0;a>b;b++){var c=new Element("div",{"class":"column",styles:{"float":"left",width:100/a+"%"}});this._ui.columns.push(c),this._ui.root.adopt(c)}this.options.columns=a},clear:function(){for(var a in this._fields)this._fields.hasOwnProperty(a)&&this._fields[a]instanceof gx.bootstrap.Field&&$(this._fields[a]).destroy(),delete this._fields[a];this._fields={}},hasField:function(a){return void 0!==this._fields[a]},addFields:function(a){for(id in a)a[id]instanceof Element||a[id]instanceof gx.ui.Container?this.addFieldItem(id,a[id]):"object"==typeOf(a[id])&&instanceOf(a[id],gx.bootstrap.Field)?this.addFieldItem(id,a[id]):null!=a[id].type?this.addField(id,a[id].type,a[id]):null!=a[id].field&&this.addField(id,a[id].field,a[id])},addFieldItem:function(a,b){if(this.hasField(a))throw new Error('Field "'+a+'" already exists.');return this._fields[a]=b,this._ui.columns[this._currentcolumn].adopt($(b)),this.nextColumn(),b},nextColumn:function(){1!=this.options.columns&&(this._currentcolumn++,this._currentcolumn==this.options.columns&&(this._currentcolumn=0))},addField:function(a,b,c){return null==c&&(c={}),null==c.horizontal&&(c.horizontal=this.options.horizontal),null==c.hintpos&&(c.hintpos=this.options.hintpos),null==c.highlighteffect&&(c.highlighteffect=this.options.highlighteffect),this.addFieldItem(a,new gx.bootstrap.Field(Object.merge(c||{},{id:a,type:b})))},getValue:function(a){return null==this._fields[a]||void 0==this._fields[a].getValue?null:this._fields[a].getValue()},getValues:function(){var a={};for(id in this._fields)"__"!=String(id).substr(0,2)&&(a[id]=this.getValue(id));return a},reset:function(){for(id in this._fields)null!=this._fields[id].reset&&this._fields[id].reset()},getField:function(a){return this._fields[a]},getFields:function(){return this._fields},setValue:function(a,b){null!=this._fields[a]&&this._fields[a].setValue(b)},setValues:function(a){for(fieldid in a)this.setValue(fieldid,a[fieldid])},setHighlights:function(a,b){null==a&&(a={});var c=0;for(id in this._fields)if(null!=this._fields[id].setHighlight)switch(typeOf(a[id])){case"string":case"boolean":this._fields[id].setHighlight(a[id],b),c++;break;case"object":this._fields[id].setHighlight(a[id].label,a[id].type),c++;break;default:this._fields[id].setHighlight()}return c},setHintHighlights:function(a,b){null==a&&(a={});var c=0;for(id in this._fields)if(null!=this._fields[id].setHintHighlight)switch(typeOf(a[id])){case"string":case"boolean":this._fields[id].setHintHighlight(a[id],b),c++;break;case"object":this._fields[id].setHintHighlight(a[id].label,a[id].type),c++;break;default:this._fields[id].setHintHighlight()}return c}}),gx.bootstrap.Form=new Class({gx:"gx.bootstrap.Form",Extends:gx.ui.Container,options:{size:"regular",label:"",value:!1,horizontal:["col-md-3","col-md-9"],columns:!1,hintpos:"right",highlighteffect:!0},_fieldsets:[],initialize:function(a,b){try{this.parent(null==a?new Element("form"):a,b),"object"==typeOf(this.options.fields)&&this.addFieldset({fields:this.options.fields,title:this.options.title}),null!=this.options.actions&&this.addActions(this.options.actions)}catch(c){gx.util.Console("gx.bootstrap.Form->initialize",c.message)}},addActions:function(a){switch(null==this._ui.actions&&(this._ui.actions=new Element("div",{"class":"form-actions"}),this._ui.actions.adopt(new Element("div.clear")),this._ui.root.adopt(this._ui.actions)),typeOf(a)){case"array":a.each(function(a){__(a).inject(this._ui.actions,"top")}.bind(this));break;case"element":a.inject(this._ui.actions,"top");break;default:__(a).inject(this._ui.actions,"top")}},addFieldset:function(a){return null==a.horizontal&&(a.horizontal=this.options.horizontal),null==a.columns&&(a.columns=this.options.columns),null==a.hintpos&&(a.hintpos=this.options.hintpos),null==a.highlighteffect&&(a.highlighteffect=this.options.highlighteffect),"object"==typeOf(a)&&(instanceOf(a,gx.bootstrap.Fieldset)||(a=new gx.bootstrap.Fieldset(null,a))),this._fieldsets.push(a),null==this._ui.actions?this._ui.root.adopt($(a)):$(a).inject(this._ui.actions,"before"),a},getValue:function(a){for(var b,c=0,d=this._fieldsets.length;d>c;c++)if(b=this._fieldsets[c].getValue(a),null!=b)return b;return null},getValues:function(){var a={};return this._fieldsets.each(function(b){a=Object.merge(a,b.getValues())}),a},getField:function(a){var b;return this._fieldsets.each(function(c){b||(b=c.getField(a))}),b},getFieldsets:function(){return this._fieldsets},setValue:function(a,b){this._fieldsets.each(function(c){null!=c.getField(a)&&c.setValue(a,b)})},setValues:function(a){this._fieldsets.each(function(b){b.setValues(a)})},setHighlights:function(a,b){var c=0;return this._fieldsets.each(function(d){c+=d.setHighlights(a,b)}),c},setHintHighlights:function(a,b){var c=0;return this._fieldsets.each(function(d){c+=d.setHintHighlights(a,b)}),c},reset:function(){this._fieldsets.each(function(a){a.reset(),a.setHighlights(),a.setHintHighlights()})}}),gx.bootstrap.MenuButton=new Class({gx:"gx.bootstrap.MenuButton",Extends:gx.ui.Container,options:{size:"regular",style:"",label:"",entries:[],orientation:"left",direction:"down"},class_checked:"btn-success",class_unchecked:"btn-warning",_checked:!1,_style:!1,initialize:function(a,b){var c=this;try{this.parent(a,b);var d="dropdown-toggle btn"+("regular"==this.options.size?"":" btn-"+this.options.size);this._display.frame=new Element("div",{"class":"btn-group"}),this._display.button=new Element("button",{"class":d}),this._display.menu=new Element("ul",{"class":"dropdown-menu"}),"up"==this.options.direction&&this._display.frame.addClass("dropup"),"right"==this.options.orientation&&this._display.menu.addClass("pull-right"),this._display.frame.adopt([this._display.button,this._display.menu]),this._display.root.adopt(this._display.frame),this.options.style&&this.setStyle(this.options.style),this.options.label&&this.setLabel(this.options.label),"array"==typeOf(this.options.entries)&&this.options.entries.each(function(a){c.add(a)}),this.setLabel(this.options.label)}catch(e){gx.util.Console("gx.bootstrap.MenuButton->initialize",e.message)}},add:function(a,b){if(a){var c=new Element("a",{html:(null==b?"":'<i class="icon-'+b+'"></i>')+a});return this._display.menu.adopt(new Element("li").adopt(c)),c}this._display.menu.adopt(new Element("li",{"class":"divider"}))},toggle:function(){this._display.frame.toggleClass("open")},open:function(){this._display.frame.addClass("open")},close:function(){this._display.frame.removeClass("open")},setLabel:function(a){this._display.button.set("html",a+'&nbsp;&nbsp;<span class="caret"></span>')},setStyle:function(a){this._style&&this._display.button.removeClass("btn-"+this_style),this._display.button.addClass("btn-"+a),this._style=a}}),gx.bootstrap.Message=new Class({Extends:gx.ui.Hud,options:{messageWidth:300,opacity:.9,duration:3e3,blend:!1,fixed:!0,"z-index":120,margintop:"50px",x:"center",y:"top"},initialize:function(a,b){var c=this;this.parent(a,b),this._messages=new Array,this._display.windows=new Element("div",{"class":"gxMessage",styles:{width:c.options.messageWidth,"margin-top":this.options.margintop,position:"absolute","z-index":c.options["z-index"]+1}}),this.add("messages",this._display.windows,{x:c.options.x,y:c.options.y},c.options.fixed),this.show("messages")
},addMessage:function(a,b,c,d,e){var f=this,g=new Element("div",{"class":"bs-message alert alert-"+(null==b?"info":b),styles:{position:"static",opacity:0,"z-index":f.options["z-index"]+2}});if(0!=c){var h=new Element("x",{"class":"close",html:"×"});g.adopt(h),h.addEvent("click",function(){f.closeMessage(g)})}switch(typeOf(a)){case"element":case"elements":case"textnode":g.adopt(a);break;case"object":g.adopt(__(a));break;case"string":case"number":var i="info";switch(b){case"error":i="warning";break;case"success":i="check"}g.adopt(new Element("div",{"class":"bs-message-inner fico-"+i,html:a}))}this._display.windows.adopt(g);var j=new Fx.Morph(g,{duration:"short"});return 1==d&&this.showBlend(),j.start({opacity:f.options.opacity}),this._messages.push(g),f.options.duration>0&&e!==!1&&f.closeMessage.delay(f.options.duration,this,g),g},closeMessage:function(a){var b=this,c=new Fx.Morph(a,{onComplete:function(){b._messages.erase(a),a.destroy(),b._messages.length<1&&b.hideBlend()}});a.setStyle("overflow","hidden"),c.start({opacity:0,height:0})},clear:function(){var a=this;this._messages.each(function(b){a.closeMessage(b)}),this._messages=[],this.hideBlend()},showStatus:function(a,b,c){if(null==this._display.status){var d=new Element("div",{"class":"gxMessageStatus"});this._display.status=this.addMessage(d,null,!1,c,!1),this._statusbar=new gx.com.Statusbar(d,{message:b,progress:a})}else this.incProgress(a,b)},hideStatus:function(){null!=this._display.status&&(this.closeMessage(this._display.status),this._display.status=null,this._statusbar=null)},incProgress:function(a,b){null!=this._statusbar&&this._statusbar.incProgress(a,b)},setProgress:function(a,b,c){null!=this._statusbar&&this._statusbar.setProgress(a,b,c)}}),gx.bootstrap.MultiValueEditor=new Class({Extends:gx.ui.Container,options:{width:"296px",options:!1,"default":!1},initialized:!1,initialize:function(a,b){try{this.parent(a,b),this._display.root.setStyles({border:"1px #d4d4d4 solid","border-radius":"4px 4px 4px 4px","box-shadow":"0 1px 4px rgba(0, 0, 0, 0.067)"}),this.options["default"]&&(this.options.options=JSON.decode(this.options["default"])),this.options.width&&this._display.root.setStyle("width",this.options.width),this._display.txtAdd=new Element("input",{type:"text"}).setStyles({"margin-bottom":"0px",padding:"0px 6px 0px 6px"}),this._display.btnAdd=new Element("img",{src:"./assets/img/icons/plus2.png"}).setStyles({"vertical-align":"center","margin-left":"7px"}),this._display.btnAdd.txt=this._display.txtAdd,this._display.btnAdd.root=this,this._display.btnAdd.addEvent("click",function(){var a=this.txt;""!=a.value&&("array"!=typeOf(this.root.options.options)&&(this.root.options.options=new Array),this.root.options.options.push(a.value),this.root.refreshOptions(),a.value="")}),this._display.head=new Element("div").setStyles({"border-bottom":"1px #d4d4d4 solid",padding:"6px"}).adopt(this._display.txtAdd).adopt(this._display.btnAdd),this._display.root.adopt(this._display.head),this.options.options&&this.refreshOptions()}catch(c){gx.util.Console("gx.bootstrap.MultiValueEditor->initialize",gx.util.parseError(c))}},move:function(a,b){this.options.options&&(this.options.options.move(a,b),this.refreshOptions())},refreshOptions:function(){this.initialized||(this._display.optionsbox=new Element("div").setStyles({padding:"4px"}),this._display.optionstable=new Element("table",{cellpadding:"3px",cellspacing:"2px"})),this._display.optionstable.empty();for(var a=0;a<this.options.options.length;a++){var b=this.options.options[a],c=new Element("tr"),d=new Element("input",{type:"text",value:b}).setStyles({"margin-bottom":"0px",padding:"0px 6px 0px 6px"}),e=new Element("td").adopt(d);c.adopt(e);var f=new Element("td",{html:'<img src="./assets/img/icons/minus.png" />'}).addEvent("click",function(){});c.adopt(f);var g=new Element("td"),h=new Element("span",{html:"&#9650;"}).addClass("cursorHand").setStyle("margin-right","5px");h.mve=this,h.pos=a,h.addEvent("click",function(){this.mve.move(this.pos,this.pos-1),this.mve.refreshOptions()});var i=new Element("span",{html:"&#9660;"}).addClass("cursorHand");i.mve=this,i.pos=a,i.addEvent("click",function(){this.mve.move(this.pos,this.pos+1),this.mve.refreshOptions()}),0!=a&&g.adopt(h),a!=this.options.options.length-1&&g.adopt(i),c.adopt(g),this._display.optionstable.adopt(c)}this._display.optionsbox.adopt(this._display.optionstable),this.initialized||(this._display.root.adopt(this._display.optionsbox),this.initialized=!0)},getValue:function(){return JSON.encode(this.options.options)},setValue:function(a){return console.log("v",a),this.options.options=JSON.decode(a),this.refreshOptions(),this}}),gx.bootstrap.NavigationBar=new Class({gx:"gx.bootstrap.Tabbox",Extends:gx.ui.Tabbox,options:{},_tabs:{},_buttons:{},build:function(){try{this._display.root.addClass("tabbable"),this._display=Object.merge({},this._display,{navbar:new Element("div",{"class":"navbar"}),navbarinner:new Element("div",{"class":"navbar-inner"}),title:new Element("div",{"class":"brand"}),tablist:new Element("ul",{"class":"nav"}),content:new Element("div",{"class":"tab-content",styles:{overflow:"auto"}}),buttons:new Element("div",{style:"float: right"})}),this.options.height&&this._display.content.setStyle("height",this.options.height),this._display.navbarinner.adopt(this._display.title,this._display.tablist,this._display.buttons),this._display.navbar.adopt(this._display.navbarinner),this._display.root.adopt(this._display.navbar,this._display.content)}catch(a){gx.util.Console("gx.bootstrap.NavigationBar->build",a.message)}return this._display.root},setTitle:function(a){switch(typeOf(a)){case"element":return this._display.title.empty(),this._display.title.adopt(a);case"string":return this._display.title.set("html",a);default:return this._display.title.set(a)}},setTabTitle:function(a,b){this._tabs[a].getFirst("a").set({html:b})},setNavigationButtons:function(a){this._display.buttons.empty(),this._display.buttons.adopt(a)},buildTab:function(a,b){var c=this,d=new Element("a",{html:b.replace(/ /g,"&nbsp;")}),e=new Element("li");return e.adopt(d),this._display.tablist.adopt(e),d.addEvent("click",function(){c.openTab(a)}),this._tabs[a]=e,e},buildContent:function(a){var b=new Element("div",{"class":"tab-pane"}).adopt(a);return this._display.content.adopt(b),b},setHighlight:function(a,b,c){if(null!=this._tabs[a]){var d=this._tabs[a].getElement("span");null!=d&&d.destroy(),null==c&&(c="important"),null!=b&&(d=new Element("span",{"class":"label label-"+c,html:b}),d.inject(this._tabs[a],"top"))}}}),gx.bootstrap.PopupMeta=new function(){this.zindex=100,this.popups=[],this.register=function(a){return this.popups.push(a),this.zindex=this.zindex+2,this.zindex},this.unregister=function(a){return this.popups.erase(a),this.popups.length},$(document.body).addEvent("keyup",function(a){if("esc"==a.key){var b=this.popups.getLast();null!=b&&b.options.closable&&b.hide()}}.bind(this))},gx.bootstrap.Popup=new Class({gx:"gx.bootstrap.Popup",Extends:gx.core.Settings,options:{color:"#000",freezeColor:"#000",opacity:"0.40",position:"fixed",transition:"quad:in",duration:"300",loader:!1,open:!1,content:null,x:"center",y:"center",closable:!0,borderbox:!0,maxHeight:"auto",minHeight:"auto",clickable:!1},isOpen:!1,initialize:function(a){try{this.parent(a),this.build()}catch(b){gx.util.Console("gx.bootstrap.Popup->initialize: ",b.message)}},build:function(){var a=this;try{this._display={domBody:$(document.body),backdrop:new Element("div",{"class":"modal-backdrop fade"}),modal:new Element("div",{"class":"modal fade"}),dialog:new Element("div",{"class":"modal-dialog"}),content:new Element("div",{"class":"modal-content"}),header:new Element("div",{"class":"modal-header"}),footer:new Element("div",{"class":"modal-footer"}),body:new Element("div",{"class":"modal-body"}),cross:new Element("button",{"class":"close",html:"&times;"}),title:new Element("h4",{"class":"modal-title",html:this.options.title})},this._display.domBody.adopt(this._display.modal),this._display.modal.adopt(this._display.dialog),this._display.dialog.adopt(this._display.content),this._display.content.adopt([this._display.header,this._display.body,this._display.footer]),this._display.header.adopt([this._display.cross,this._display.title]),this.options.width&&this._display.dialog.setStyle("width",this.options.width),this.options.content&&this._display.body.adopt(__(this.options.content)),this._display.footer.adopt("array"==typeOf(this.options.footer)?this.options.footer:__(this.options.footer)),this.setTitle(this.options.title),this.options.closable?(this._display.cross.addEvent("click",function(){a.hide()}),this.options.clickable&&this._display.backdrop.addEvent("click",function(){a.hide()})):this._display.cross.destroy()}catch(b){gx.util.Console("gx.bootstrap.Popup->build",b.message)}},setTitle:function(a){return a?(this._display.header.erase("style"),void this._display.title.set("html",a)):void this._display.header.setStyle("display","none")},setContent:function(a){try{switch(this._display.body.empty(),typeOf(a)){case"element":case"elements":case"textnode":case"array":this._display.body.adopt(a);break;case"object":this._display.body.adopt(__(a));break;case"string":case"number":this._display.body.set("html",a)}}catch(b){gx.util.Console("gx.bootstrap.Popup->initialize",b.message)}},getContent:function(){return this._display.body},show:function(){var a=this;try{var b=gx.bootstrap.PopupMeta.register(this);this._display.modal.setStyle("z-index",b),this._display.backdrop.setStyle("z-index",b-1),this._display.domBody.adopt(this._display.backdrop),this._display.modal.setStyle("display","block"),function(){a._display.backdrop.addClass("in"),a._display.modal.addClass("in"),a._display.domBody.addClass("modal-open")}.delay(100),this.isOpen=!0,this.fireEvent("open")}catch(c){gx.util.Console("gx.bootstrap.Popup->show: ",c.message)}},hide:function(){var a=this;try{this._display.backdrop.removeClass("in"),this._display.modal.removeClass("in"),function(){a._display.modal.setStyle("display","none"),a._display.backdrop.dispose(),0==gx.bootstrap.PopupMeta.unregister(a)&&a._display.domBody.removeClass("modal-open")}.delay(100),this.isOpen=!1,this.fireEvent("hide")}catch(b){gx.util.Console("gx.bootstrap.Popup->hide: ",b.message)}}}),gx.bootstrap.Select=new Class({gx:"gx.bootstrap.Select",Extends:gx.ui.Container,options:{enableLoader:void 0,disableLoader:void 0,method:"GET",url:"index.php",height:"100px",width:"180px",requestData:{},requestParam:"search",searchFilter:void 0,localOptions:null,allowEmpty:!1,icon:"list-alt",label:"",orientation:"left","default":"*",textFormat:null,listFormat:function(a){return a.name},formatID:function(a){return a.Id},decodeResponse:function(a){return JSON.decode(a)},reset:!1,msg:{de:{noSelection:"Keine Auswahl"},noSelection:"No Selection"}},_running:!1,_closed:!0,_lastSearch:!1,_selected:null,_search:"",initialize:function(a,b){var c=this;try{this.parent(a,b),null==this.options.textFormat&&(this.options.textFormat=this.options.listFormat),this._display.root.addClass("bs-select input-group"),this._display.textbox=new Element("input",{type:"text","class":"left form-control",styles:{width:this.options.width}});var d=this.options.icon?'<span class="glyphicon glyphicon-'+this.options.icon+'"></span>&nbsp;':"";if(this._display.symbol=new Element("span").addEvent("click",function(a){a.stopPropagation(),c.show()}),this.options.label&&"object"==typeof this.options.label){{var e=Object.clone(this.options.label);null==e.html?String(e.text).htmlSpecialChars():e.html}e.html=d+(e.text?" "+e.text:""),delete e.text,this._display.symbol.set(e)}else(""!=d||this.options.label&&""!=this.options.label)&&this._display.symbol.set("html",d+(this.options.label?" "+this.options.label:""));this._display.symbol.addClass("input-group-addon"),this._display.navbar=new Element("div",{"class":"navbar",styles:{position:"absolute"}}),this._display.dropdown=new Element("div",{"class":"dropdown"}),this._display.frame=new Element("div",{"class":"dropdown-menu bs-select-menu"}),this._display.dropdown.adopt(this._display.frame),this._display.navbar.adopt(this._display.dropdown),this._display.listbox=new Element("div",{styles:{height:this.options.height,overflow:"auto"}}),this._display.frame.adopt(this._display.listbox),"left"==this.options.orientation?this._display.root.adopt([this._display.symbol,this._display.textbox]):(this._display.root.addClass("bs-select-append"),this._display.root.adopt([this._display.textbox,this._display.symbol])),this._display.root.adopt([new Element("div",{"class":"clear"}),this._display.navbar]),this._display.textbox.addEvents({focus:function(){c.show()},keyup:function(){c.search()},blur:function(){c.hide.delay(500,c)}}),this._display.textbox.setStyle("font-style","italic"),this._display.textbox.value="("+this.getMessage("noSelection")+")"}catch(f){gx.util.Console("gx.bootstrap.Select->initialize",gx.util.parseError(f))}},search:function(a){var b=this;try{if(null==a&&(a=this._display.textbox.value.trim()),(""==a||null==a)&&(a=this.options["default"]),a===this._lastSearch);else if(this.options.localOptions)this._lastSearch=a,this.buildList(this.options.searchFilter?this.options.searchFilter(this.options.localOptions,this._lastSearch):this.options.localOptions);else if(this._running!==!0){this.fireEvent("request"),this._running=!0,this._lastSearch=a;var c=this.options.requestData;this.options.searchFilter||("function"==typeOf(this.options.requestParam)?c=this.options.requestParam(c,a):c[this.options.requestParam]=a);var d={method:b.options.method,url:b.options.url,data:c,onSuccess:function(a){b.evalResponse(a)},onFailure:function(){alert("Request failed")}};"function"==typeOf(b.options.enableLoader)&&(d.onRequest=b.options.enableLoader),"function"==typeOf(b.options.disableLoader)&&(d.onComplete=b.options.disableLoader),req=new Request(d),req.send()}}catch(e){gx.util.Console("gx.bootstrap.Select->search",e.message)}return this},evalResponse:function(a){try{var b=this.options.decodeResponse(a);"array"==typeOf(b)?this.buildList(this.options.searchFilter?this.options.searchFilter(b,this._lastSearch):b):gx.util.Console("gx.bootstrap.Select->evalResponse.","Invalid object type. Array expected.")}catch(c){gx.util.Console("gx.bootstrap.Select->evalResponse",gx.util.parseError(c))}this._running=!1,this.search()},buildList:function(a){var b=this;try{this._display.listbox.empty(),this.options.reset&&this._display.listbox.adopt(new Element("a",{styles:{"text-align":"center","font-style":"italic"},html:this.options.reset}).addEvent("click",function(){b.set()}));var c=!0,d=function(a,c){a.addEvent("click",function(){b.set(c)})};this.options.allowEmpty&&(a=[null].append(a));var e=a.length;for(i=0;e>i;i++){var f=new Element("a");c&&f.set("class","odd");var g=null==a[i]&&"string"==typeof this.options.allowEmpty?this.options.allowEmpty:this.options.listFormat(a[i]);typeOf(g).match(/^elements?$/)?f.empty().adopt(g):f.set("html",g),this._display.listbox.adopt(f),c=!c,d(f,a[i])}}catch(h){gx.util.Console("gx.bootstrap.Select->buildList",h.message)}return this},show:function(){return this._display.textbox.disabled?this:(this._display.frame.setStyle("display","block"),this._display.textbox.set("value",this._search),this._display.textbox.focus(),this._closed=!1,this.search())},hide:function(){return this._closed?this:(this._closed=!0,this._display.frame.setStyle("display","none"),this._search=this._display.textbox.value,this.update())},update:function(a){return null==this._selected?(null!=a&&a||this.fireEvent("noselect"),this._display.textbox.setStyle("font-style","italic"),this._display.textbox.value="("+this.getMessage("noSelection")+")"):(null!=a&&a||this.fireEvent("select",this._selected),this._display.textbox.setStyle("font-style","normal"),this._display.textbox.value=this.options.textFormat(this._selected)),this},setRequestData:function(a){return this.options.requestData=a,this},set:function(a){return this._selected=a,this._closed?this.update(!0):this.hide()},getId:function(){return null==this._selected?void 0:this.options.formatID(this._selected)},getValue:function(){return this.getId()},getSelected:function(){return this._selected},reset:function(){return this._display.listbox.empty(),this._selected=null,this._lastSearch=!1,this.update()},enable:function(){return this._display.textbox.erase("disabled"),this},disable:function(){return this._display.textbox.set("disabled",!0),this}}),gx.bootstrap.Tabbox=new Class({gx:"gx.bootstrap.Tabbox",Extends:gx.ui.Tabbox,options:{frames:[],height:!1,show:1,onChange:!1},_tabs:{},build:function(){try{this._display.root.addClass("tabbable"),this._display=Object.merge({},this._display,{tablist:new Element("ul",{"class":"nav nav-tabs"}),content:new Element("div",{"class":"tab-content",styles:{overflow:"auto"}})}),this.options.height&&this._display.content.setStyle("height",this.options.height),this._display.root.adopt(this._display.tablist),this._display.root.adopt(this._display.content)}catch(a){gx.util.Console("gx.bootstrap.Tabbox->build",a.message)}},buildTab:function(a,b){var c=this,d=new Element("a",{html:b.replace(/ /g,"&nbsp;")}),e=new Element("li");return e.adopt(d),this._display.tablist.adopt(e),d.addEvent("click",function(){c.openTab(a)}),this._tabs[a]=e,e},buildContent:function(a){var b=new Element("div",{"class":"tab-pane"}).adopt(a);return this._display.content.adopt(b),b},setHighlight:function(a,b,c){if(null!=this._tabs[a]){var d=this._tabs[a].getElement("span");null!=d&&d.destroy(),null==c&&(c="important"),null!=b&&(d=new Element("span",{"class":"label label-"+c,html:b}),d.inject(this._tabs[a],"top"))}}}),gx.bootstrap.Table=new Class({gx:"gx.bootstrap.Table",Extends:gx.ui.Table,_theme:{asc:"asc",desc:"desc",th:"th",filter:"filter",table_body:"fixed table table-striped table-hover",table_head:"fullw table-head",filter_elem:"span"}}),gx.bootstrap.Timebox=new Class({gx:"gx.bootstrap.Timebox",Extends:gx.ui.Timebox,options:{time:0,unit:"seconds",seconds:!0,prefix:!1,readonly:!1,disabled:!1,orientation:"left",icon:!1,label:""},build:function(){var a=this;try{if(this._display.root.addClass("bs-timebox"),this._display.root.addClass("input-append"),this.options.label||this.options.icon){this._display.root.addClass("input-prepend");var b=this.options.icon?'<i class="icon-'+this.options.icon+'"></i>':"";if(this._display.label=new Element("span"),this.options.label&&"object"==typeof this.options.label){{var c=Object.clone(this.options.label);null==c.html?String(c.text).htmlSpecialChars():c.html}c.html=b+(c.text?" "+c.text:""),delete c.text,this._display.label.set(c)}else this._display.label.set("html",b+(this.options.label?" "+this.options.label:""));this._display.label.addClass("add-on"),this._display.root.adopt(this._display.label)}this._display.hours=new Element("input",{type:"text"}),this._display.root.adopt(this._display.hours),this._display.hours.addEvent("change",function(){a.update()}),this._display.minutes=new Element("input",{type:"text",styles:{"border-radius":0}}),this._display.root.adopt(new Element("span",{"class":"separator",html:":"})),this._display.root.adopt(this._display.minutes),this._display.minutes.addEvent("change",function(){a.update()});var d=this.options.readonly&&!gx.ui.Timebox.legacyMode,e=this.options.disabled||gx.ui.Timebox.legacyMode&&this.options.readonly;this.options.seconds&&(this._display.seconds=new Element("input",{type:"text",styles:{"border-radius":0}}),this._display.root.adopt(new Element("span",{"class":"separator",html:":"})),this._display.root.adopt(this._display.seconds),this._display.seconds.addEvent("change",function(){a.update()}),d&&this._display.seconds.set("readonly","readonly"),e&&this._display.seconds.set("disabled","disabled")),d&&(this._display.hours.set("readonly","readonly"),this._display.minutes.set("readonly","readonly")),e&&this.disable(),this.options.prefix&&(this._display.prefix=new Element("button",{"class":"btn btn-success",html:'&nbsp;<i class="icon-plus"></i>'}),this._display.root.adopt(this._display.prefix),this._display.prefix.addEvent("click",function(){a.options.disabled||gx.ui.Timebox.legacyMode&&a.options.readonly||a.setPrefix(!a._prefix)}))}catch(f){gx.util.Console("gx.bootstrap.Timebox->build",f.message)}},setPrefix:function(a){try{this._display.prefix&&(this._prefix=a,this._prefix?(this._display.prefix.removeClass("btn-danger"),this._display.prefix.addClass("btn-success"),this._display.prefix.set("html",'&nbsp;<i class="icon-plus"></i>')):(this._display.prefix.removeClass("btn-success"),this._display.prefix.addClass("btn-danger"),this._display.prefix.set("html",'&nbsp;<i class="icon-minus"></i>')))}catch(b){gx.util.Console("gx.bootstrap.Timebox->setPrefix",b.message)}return this}}),gx.bootstrap.ValueList=new Class({Extends:gx.ui.Container,options:{deletable:!0},initialized:!1,initialize:function(a,b){var c=this;try{this.parent(a,b),this._display.root.addClass("bs-valuelist"),this.options.deletable&&this._display.root.addClass("bs-valuelist-deletable");var d=new Element("span",{styles:{position:"absolute",left:"-100000px",padding:"10px"}}).inject($(document.body));this._display.textbox=new Element("input",{type:"text"}).addEvents({keydown:function(a){"enter"==a.key&&""!=this.get("value")?(c.addValue(this.get("value")),this.erase("value")):(d.set("html",this.get("value")),this.setStyle("width",d.offsetWidth))},focus:function(){c._display.root.addClass("focus")},blur:function(){c._display.root.removeClass("focus"),""!=this.get("value")&&(c.addValue(this.get("value")),this.erase("value"))}}),this._display.list=new Element("ul"),this._display.root.adopt([this._display.list,this._display.textbox,new Element("div",{"class":"clear"})]),this._display.root.addEvent("click",function(){c._display.textbox.focus()}),this.sortable=new Sortables(this._display.list)}catch(e){gx.util.Console("gx.bootstrap.ValueList->initialize",gx.util.parseError(e))}},focus:function(){this._display.textbox.focus()},addValue:function(a){var b=this,c=new Element("li",{html:a}).addEvent("click",function(){b.fireEvent("click")});c.store("value",a),this.options.deletable&&c.adopt(new Element("span").addEvent("click",function(){c.destroy()})),this._display.list.adopt(c),null!=this.sortable&&this.sortable.addItems(c)},getValues:function(){var a=[];return this._display.list.getElements("li").each(function(b){a.push(b.retrieve("value"))}),a},setValues:function(a){null!=this.sortable&&this.sortable.removeItems(this._display.list.getElements("li")).destroy(),null!=a&&a.each(function(a){this.addValue(a)}.bind(this))},disable:function(){this._display.textbox.setStyle("display","none"),this._display.root.removeClass("bs-valuelist-deletable"),this._display.root.addClass("bs-valuelist-readonly"),delete this.sortable},enable:function(){this._display.textbox.setStyle("display","inline-block"),this._display.root.removeClass("bs-valuelist-readonly"),this.sortable=new Sortables(this._display.list),this.options.deletable&&this._display.root.addClass("bs-valuelist-deletable")}}),gx.bootstrap.VersionField=new Class({gx:"gx.bootstrap.VersionField",Extends:gx.ui.Container,options:{},_display:{},initialize:function(a){var b=this;try{this.parent(null,a),this._display.major=this.createSelect(1,9),this._display.minor=this.createSelect(0,99),this._display.maintenance=this.createSelect(0,9),this._display.root.adopt(this._display.major,this._display.minor,this._display.maintenance),this._display.major.addEvent("change",function(a){b.fireEvent("change",[a])}),this._display.minor.addEvent("change",function(a){b.fireEvent("change",[a])}),this._display.maintenance.addEvent("change",function(a){b.fireEvent("change",[a])})}catch(c){gx.util.Console("gx.bootstrap.VersionField->initialize",c.message)}},getValue:function(){return this._display.major.get("value")+this._display.minor.get("value")+this._display.maintenance.get("value")},setValue:function(a){a+="",this._display.major.selectedIndex=a.substr(0,1)-1,this._display.minor.selectedIndex=a.substr(1,2),this._display.maintenance.selectedIndex=a.substr(3,1)},createSelect:function(a,b){var c=new Element("select.form-control",{style:"width:80px; display: inline;"}),d=(""+b).length;for(i=a;b>=i;i++){for(var e=""+i;e.length<d;)e="0"+e;c.adopt(new Element("option",{value:e,html:e}))}return c}}),gx.bootstrap.VersionField.format=function(a){return a+="",a.substr(0,1)+"."+a.substr(1,2)+"-"+a.substr(3,1)};